<Window x:Class="MechwarriorVRLauncher.SetupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Setup"
        Height="850"
        Width="900"
        WindowStartupLocation="CenterScreen"
        Icon="assets/Logo.png">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0"
                   Text="Setup"
                   FontSize="20"
                   FontWeight="Bold"
                   Margin="0,0,0,20"/>

        <!-- Tab Control -->
        <TabControl Grid.Row="1" Margin="0,0,0,10">
            <!-- Configuration Tab -->
            <TabItem Header="Configuration">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Configuration Section (Scrollable) -->
                    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
            <!-- MechWarrior Mod Zip Files -->
            <StackPanel Margin="0,0,0,15">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="MechWarrior Mod Zip Files" FontWeight="SemiBold"/>
                    <TextBlock Text=" - " Margin="5,0,5,0"/>
                    <TextBlock>
                        <Hyperlink x:Name="ModZipNexusLink"
                                   RequestNavigate="Hyperlink_RequestNavigate">
                            <Run Text="Download from Nexus Mods"/>
                        </Hyperlink>
                    </TextBlock>
                </StackPanel>
                <Border BorderBrush="Gray" BorderThickness="1" Padding="5" MinHeight="80" MaxHeight="120">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <ListBox x:Name="ModZipFilesListBox"
                                 BorderThickness="0"
                                 Background="Transparent"/>
                    </ScrollViewer>
                </Border>
                <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                    <Button x:Name="AddModZipButton"
                            Content="Add Mod Zip..."
                            Click="AddModZipButton_Click"
                            Margin="0,0,10,0"
                            Padding="10,5"/>
                    <Button x:Name="RemoveModZipButton"
                            Content="Remove Selected"
                            Click="RemoveModZipButton_Click"
                            Padding="10,5"/>
                </StackPanel>
            </StackPanel>

            <!-- UEVR Zip File -->
            <StackPanel Margin="0,0,0,15">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="UEVR Zip File" FontWeight="SemiBold"/>
                    <TextBlock Text=" - " Margin="5,0,5,0"/>
                    <TextBlock>
                        <Hyperlink x:Name="UevrGitHubLink"
                                   RequestNavigate="Hyperlink_RequestNavigate">
                            <Run Text="Download from GitHub"/>
                        </Hyperlink>
                    </TextBlock>
                </StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="UEVRZipFileTextBox"
                             Grid.Column="0"
                             Margin="0,0,10,0"/>
                    <Button x:Name="BrowseUEVRZipButton"
                            Grid.Column="1"
                            Content="Browse..."
                            Click="BrowseUEVRZipButton_Click"
                            Padding="10,5"/>
                </Grid>
            </StackPanel>

            <!-- UEVR Config Zip File -->
            <StackPanel Margin="0,0,0,15">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="UEVR Config Zip File" FontWeight="SemiBold"/>
                    <TextBlock Text=" - " Margin="5,0,5,0"/>
                    <TextBlock>
                        <Hyperlink x:Name="UevrConfigNexusLink"
                                   RequestNavigate="Hyperlink_RequestNavigate">
                            <Run Text="Download from Nexus Mods"/>
                        </Hyperlink>
                    </TextBlock>
                </StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="UEVRConfigZipFileTextBox"
                             Grid.Column="0"
                             Margin="0,0,10,0"/>
                    <Button x:Name="BrowseUEVRConfigZipButton"
                            Grid.Column="1"
                            Content="Browse..."
                            Click="BrowseUEVRConfigZipButton_Click"
                            Padding="10,5"/>
                </Grid>
            </StackPanel>

            <!-- UEVR Keybindings -->
            <Expander Header="UEVR Keybindings" Margin="0,0,0,15" IsExpanded="False">
                <StackPanel Margin="20,10,0,0">
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Show Cursor Key:"
                                   VerticalAlignment="Center"
                                   Margin="0,0,10,0"/>
                        <TextBox x:Name="ShowCursorKeyTextBox"
                                 Grid.Column="1"
                                 Text="Home"
                                 PreviewKeyDown="ShowCursorKeyTextBox_PreviewKeyDown"
                                 PreviewTextInput="KeyBindingTextBox_PreviewTextInput"
                                 GotFocus="KeyBindingTextBox_GotFocus"
                                 Background="White"
                                 Cursor="Hand"
                                 VerticalContentAlignment="Center"
                                 TextAlignment="Center"/>
                    </Grid>

                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Menu Toggle Key:"
                                   VerticalAlignment="Center"
                                   Margin="0,0,10,0"/>
                        <TextBox x:Name="MenuKeyTextBox"
                                 Grid.Column="1"
                                 Text="Insert"
                                 PreviewKeyDown="MenuKeyTextBox_PreviewKeyDown"
                                 PreviewTextInput="KeyBindingTextBox_PreviewTextInput"
                                 GotFocus="KeyBindingTextBox_GotFocus"
                                 Background="White"
                                 Cursor="Hand"
                                 VerticalContentAlignment="Center"
                                 TextAlignment="Center"/>
                    </Grid>

                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Reset View Key:"
                                   VerticalAlignment="Center"
                                   Margin="0,0,10,0"/>
                        <TextBox x:Name="ResetViewKeyTextBox"
                                 Grid.Column="1"
                                 Text="F9"
                                 PreviewKeyDown="ResetViewKeyTextBox_PreviewKeyDown"
                                 PreviewTextInput="KeyBindingTextBox_PreviewTextInput"
                                 GotFocus="KeyBindingTextBox_GotFocus"
                                 Background="White"
                                 Cursor="Hand"
                                 VerticalContentAlignment="Center"
                                 TextAlignment="Center"/>
                    </Grid>
                </StackPanel>
            </Expander>

            <!-- Separator and Installation Directories Section -->
            <Separator Margin="0,20,0,20"/>
            <TextBlock Text="Installation Directories"
                       FontWeight="Bold"
                       FontSize="14"
                       Margin="0,0,0,15"/>

            <!-- MechWarrior Mods Directory -->
            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="MechWarrior Mods Directory" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="ModsDirectoryTextBox"
                             Grid.Column="0"
                             Margin="0,0,10,0"/>
                    <Button x:Name="AutoDetectModsButton"
                            Grid.Column="1"
                            Content="Auto-Detect"
                            Click="AutoDetectModsButton_Click"
                            Margin="0,0,10,0"
                            Padding="10,5"/>
                    <Button x:Name="BrowseModsButton"
                            Grid.Column="2"
                            Content="Browse..."
                            Click="BrowseModsButton_Click"
                            Padding="10,5"/>
                </Grid>
            </StackPanel>

            <!-- UEVR Install Directory -->
            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="UEVR Install Directory" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="UEVRInstallDirectoryTextBox"
                             Grid.Column="0"
                             Margin="0,0,10,0"/>
                    <Button x:Name="BrowseUEVRInstallButton"
                            Grid.Column="1"
                            Content="Browse..."
                            Click="BrowseUEVRInstallButton_Click"
                            Padding="10,5"/>
                </Grid>
            </StackPanel>

            <!-- UEVR Config Directory -->
            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="UEVR Config Directory" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="UEVRConfigDirectoryTextBox"
                             Grid.Column="0"
                             Margin="0,0,10,0"/>
                    <Button x:Name="BrowseUEVRConfigButton"
                            Grid.Column="1"
                            Content="Browse..."
                            Click="BrowseUEVRConfigButton_Click"
                            Padding="10,5"/>
                </Grid>
            </StackPanel>
            </StackPanel>
                    </ScrollViewer>

                    <!-- Installation Options -->
                    <StackPanel Grid.Row="1" Margin="0,20,0,0">
                        <TextBlock Text="Installation" FontWeight="SemiBold" Margin="0,0,0,10"/>

                        <!-- Component Selection Checkboxes -->
                        <CheckBox x:Name="InstallModsCheckBox"
                                  Content="Install MW5 Mods"
                                  IsChecked="True"
                                  Margin="0,0,0,8"/>
                        <CheckBox x:Name="InstallUEVRCheckBox"
                                  Content="Install UEVR"
                                  IsChecked="True"
                                  Margin="0,0,0,8"/>
                        <CheckBox x:Name="InstallUEVRConfigCheckBox"
                                  Content="Install UEVR Config"
                                  IsChecked="True"
                                  Margin="0,0,0,15"/>

                        <CheckBox x:Name="CleanInstallCheckBox"
                                  Content="Clean Install (delete existing files before installing)"
                                  Margin="0,0,0,15"/>

                        <!-- Install Button -->
                        <Button x:Name="InstallButton"
                                Content="Install"
                                Click="InstallButton_Click"
                                MinWidth="140"
                                HorizontalAlignment="Left"
                                Padding="15,8"
                                FontWeight="SemiBold"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- Launcher Options Tab -->
            <TabItem Header="Launcher Options">
                <Grid Margin="20">
                    <StackPanel>
                        <TextBlock Text="Game Launch Settings"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Margin="0,0,0,20"/>

                        <CheckBox x:Name="StartSteamVRCheckBox"
                                  Content="Start SteamVR before launching"
                                  IsChecked="True"
                                  Margin="0,0,0,15"
                                  FontSize="13"
                                  ToolTip="Start SteamVR before launching the game"
                                  ToolTipService.ShowOnDisabled="True"/>

                        <CheckBox x:Name="AutoExitCheckBox"
                                  Content="Auto-exit launcher after injection"
                                  IsChecked="False"
                                  FontSize="13"/>

                        <TextBlock Text="Note: These settings apply when using the 'Launch MW5 VR' button from the main window."
                                   TextWrapping="Wrap"
                                   Foreground="Gray"
                                   FontSize="11"
                                   Margin="0,30,0,0"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- Log Output Tab -->
            <TabItem Header="Log">
                <Border BorderBrush="Gray" BorderThickness="1" Margin="10">
                    <TextBox x:Name="LogTextBox"
                             Padding="10"
                             TextWrapping="Wrap"
                             FontFamily="Consolas"
                             IsReadOnly="True"
                             BorderThickness="0"
                             Background="Transparent"
                             VerticalScrollBarVisibility="Auto"
                             HorizontalScrollBarVisibility="Disabled"/>
                </Border>
            </TabItem>
        </TabControl>

        <!-- Status and Progress -->
        <StackPanel Grid.Row="2" Margin="0,10,0,0">
            <Border Background="#F0F0F0"
                    Padding="10"
                    Margin="0,0,0,10"
                    CornerRadius="4">
                <TextBlock x:Name="StatusTextBlock"
                           Text="Ready"
                           FontSize="12"/>
            </Border>
            <ProgressBar x:Name="InstallProgressBar"
                         Height="4"
                         IsIndeterminate="False"
                         Margin="0,0,0,10"/>
        </StackPanel>
    </Grid>
</Window>
